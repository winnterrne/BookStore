<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Quản lý giá bán</title>
  <link rel="stylesheet" href="admin.css">
</head>
<body>

  <div class="custom-header">
    <div class="dashboard-title">DASHBOARD</div>
    <nav class="admin-nav-inline">
      <ul>
        <li><a href="dashboard.html">TỔNG QUAN</a></li>
        <li><a href="users.html">NGƯỜI DÙNG</a></li>
        <li><a href="categories.html">LOẠI SP</a></li>
        <li><a href="products.html">SẢN PHẨM</a></li>
        <li><a href="import.html">NHẬP HÀNG</a></li>
        <li><a href="pricing.html" class="active">GIÁ BÁN</a></li>
        <li><a href="orders.html">ĐƠN HÀNG</a></li>
        <li><a href="inventory.html">TỒN KHO</a></li>
        <li><a href="../index.html">THOÁT</a></li>
      </ul>
    </nav>
  </div>

  <main class="admin-content">
    <div class="page-title">
      <a href="dashboard.html">Quay lại Dashboard</a>
      Quản lý giá bán
    </div>

    <div class="content-box">
      <h2 class="section-title">Bảng giá sản phẩm</h2>
      <table class="table">
        <thead>
          <tr>
            <th>Mã SP</th>
            <th>Tên SP</th>
            <th>Giá cũ</th>
            <th>Giá bán</th>
            <th>Giảm giá (%)</th>
            <th>Số lượng</th>
            <th>Hành động</th>
          </tr>
        </thead>
        <tbody id="pricingBody">
          <!-- Dữ liệu sẽ được load tự động -->
        </tbody>
      </table>

      <!-- PHÂN TRANG -->
      <div class="content-pagination">
        <div class="pagination">
          <button class="prev">&lt;</button>
          <button class="page active">1</button>
          <button class="page">2</button>
          <button class="page">3</button>
          <button class="page">4</button>
          <button class="next">&gt;</button>
        </div>
      </div>
    </div>
  </main>

  <script src="../data-book.js"></script>
<script>
  const tbody = document.getElementById("pricingBody");
  const modalsContainer = document.createElement('div');
  document.body.appendChild(modalsContainer);

  tbody.innerHTML = books.map(b => {
    const row = `
      <tr>
        <td>${b.id}</td>
        <td>${b.title}</td>
        <td>${b.oldPrice.toLocaleString()}đ</td>
        <td>${b.price.toLocaleString()}đ</td>
        <td>${b.discount}%</td>
        <td>${b.stock}</td>
        <td>
          <a href="#editModal-${b.id}" class="btn-small btn-reset">Sửa</a>
          <a href="#deleteModal-${b.id}" class="btn-small btn-lock">Xóa</a>
        </td>
      </tr>
    `;

    // Generate modals
    modalsContainer.innerHTML += `
      <!-- Edit Modal for ${b.id} -->
      <div id="editModal-${b.id}" class="modal">
        <div class="modal-content">
          <div class="modal-header">
            <div class="modal-title">Sửa giá bán</div>
            <a href="#" class="modal-close">×</a>
          </div>
          <form class="modal-form">
            <div><label>Mã SP</label><input type="text" value="${b.id}" disabled></div>
            <div><label>Tên SP</label><input type="text" value="${b.title}" disabled></div>
            <div><label>Giá cũ</label><input type="number" value="${b.oldPrice}"></div>
            <div><label>Giá bán</label><input type="number" value="${b.price}"></div>
            <div><label>Giảm giá (%)</label><input type="number" value="${b.discount}"></div>
            <div class="modal-actions">
              <a href="#" class="btn-save" onclick="alert('Đã lưu!')">Lưu</a>
              <a href="#" class="btn-cancel">Hủy</a>
            </div>
          </form>
        </div>
      </div>

      <!-- Delete Modal for ${b.id} -->
      <div id="deleteModal-${b.id}" class="modal">
        <div class="modal-content">
          <div class="modal-header">
            <div class="modal-title">Xác nhận xóa</div>
            <a href="#" class="modal-close">×</a>
          </div>
          <div class="confirm-delete">
            <p>Bạn có chắc muốn xóa <strong>${b.title}</strong> không?</p>
            <div class="modal-actions">
              <a href="#" class="btn-save" style="background:#d32f2f;" onclick="alert('Đã xóa!')">Xóa</a>
              <a href="#" class="btn-cancel">Hủy</a>
            </div>
          </div>
        </div>
      </div>
    `;

    return row;
  }).join('');
</script>


<script>
  // PHÂN TRANG NHƯNG CHỈ NHẢY MÀU
  document.addEventListener("DOMContentLoaded", () => {
    const pages = document.querySelectorAll('.pagination .page');
    const prevBtn = document.querySelector('.pagination .prev');
    const nextBtn = document.querySelector('.pagination .next');

    function setActive(index) {
      pages.forEach(p => p.classList.remove('active'));
      pages[index].classList.add('active');
      prevBtn.disabled = index === 0;
      nextBtn.disabled = index === pages.length - 1;
    }

    pages.forEach((btn, idx) => {
      btn.addEventListener('click', () => setActive(idx));
    });

    prevBtn.addEventListener('click', () => {
      let current = [...pages].findIndex(p => p.classList.contains('active'));
      if (current > 0) setActive(current - 1);
    });

    nextBtn.addEventListener('click', () => {
      let current = [...pages].findIndex(p => p.classList.contains('active'));
      if (current < pages.length - 1) setActive(current + 1);
    });

    setActive(0); // Trang 1 được chọn ban đầu
  });
</script>


</body>
</html>